<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>maipaaaaaaaaanðŸ”‹âš¡</title>

  <!-- favicon / thumbnail (lokal file yang kamu upload) -->
  <link rel="icon" href="/mnt/data/49f65aa4-f0fb-4d7f-a8cd-b31a5fb33ea8.png" />

  <style>
    :root{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
    body{max-width:920px;margin:28px auto;padding:18px;background:#fafafa;color:#111}
    header{display:flex;align-items:center;gap:12px}
    h1{font-size:20px;margin:0}
    .card{background:#fff;border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(12,12,12,.06);margin-top:12px}
    textarea{width:100%;min-height:140px;padding:12px;border-radius:8px;border:1px solid #e6e6e6;resize:vertical;font-size:15px}
    .row{display:flex;gap:12px;margin-top:10px;flex-wrap:wrap}
    .btn{padding:8px 12px;border-radius:8px;border:0;background:#111;color:#fff;cursor:pointer}
    .muted{color:#666;font-size:13px}
    label{display:flex;gap:8px;align-items:center}
    pre{white-space:pre-wrap;word-break:break-word;background:#f6f6f6;padding:12px;border-radius:8px}
    footer{margin-top:18px;color:#666;font-size:13px}
    code{background:#f2f4f6;padding:2px 6px;border-radius:6px;font-size:13px}
  </style>
</head>
<body>
  <header>
    <div>
      <h1>maipaaaaaaaaan</h1>
      <div class="muted">Masukkan teks â†’ hasil otomatis (aturan: <code>K â†’ P</code>, <code>L â†’ N</code>, <code>ng â†’ m</code>).</div>
    </div>
  </header>

  <div class="card">
    <strong>Aturan (tetap):</strong>
    <div class="row" style="margin-top:8px">
      <!-- Fixed mappings -->
      <input type="hidden" id="kMap" value="p" />
      <input type="hidden" id="lMap" value="n" />
      <div class="muted">Mapping: <code>K â†’ P</code> &amp; <code>L â†’ N</code> (tetap).</div>

      <label title="Aktifkan penggantian 'ng' â†’ 'm'">
        <input type="checkbox" id="ngToggle" checked /> Ganti <code>ng</code> â†’ <code>m</code>
      </label>

      <label title="Case sensitive behavior">
        <input type="checkbox" id="preserveCase" checked /> Pertahankan kapitalisasi
      </label>
    </div>

    <div style="margin-top:12px">
      <textarea id="inputText" placeholder="Ketik atau paste teks di sini...">sekarang
padang
contoh lain: Angkringan
lalu lakukannya</textarea>
    </div>

    <div class="row">
      <button class="btn" id="transformBtn">Transform sekarang</button>
      <button class="btn" id="copyBtn">Salin hasil</button>
      <button class="btn" id="downloadBtn">Unduh .txt</button>
      <div style="flex:1" class="muted">Hasil akan muncul langsung di bawah saat transformasi dijalankan.</div>
    </div>

    <div style="margin-top:12px">
      <strong>Hasil:</strong>
      <pre id="outputText"></pre>
    </div>

    <footer>
      Catatan: Aturan saat ini tetap â€” <code>K â†’ P</code>, <code>L â†’ N</code>, dan <code>ng â†’ m</code>. Kamu bisa ubah teks dan pengaturan kapitalisasi di atas.
    </footer>
  </div>

  <script>
    // Utility: preserve capitalization per-letter
    function mapCharWithCase(origChar, mappedChar, preserve){
      if(!preserve) return mappedChar;
      if(origChar.toUpperCase() === origChar && origChar.toLowerCase() !== origChar) {
        return mappedChar.toUpperCase();
      }
      if(origChar.toLowerCase() === origChar && origChar.toUpperCase() !== origChar) {
        return mappedChar.toLowerCase();
      }
      return mappedChar;
    }

    function transformText(text, opts){
      // opts = {kMap: 'p', lMap: 'n', ngEnabled: true|false, preserveCase: true|false}
      const preserve = !!opts.preserveCase;
      let out = '';
      for(let i=0;i<text.length;i++){
        const ch = text[i];
        const next = text[i+1] || '';

        // 1) 'ng' sequence (case-insensitive) -> 'm'
        if(opts.ngEnabled && (ch.toLowerCase() === 'n' && next.toLowerCase() === 'g')){
          const mapped = mapCharWithCase(ch, 'm', preserve);
          out += mapped;
          i++; // skip the 'g'
          continue;
        }

        // 2) K/k -> mapped (fixed to 'p')
        if(ch.toLowerCase() === 'k'){
          const mappedChar = opts.kMap.toLowerCase();
          out += mapCharWithCase(ch, mappedChar, preserve);
          continue;
        }

        // 3) L/l -> mapped (fixed to 'n')
        if(ch.toLowerCase() === 'l'){
          const mappedChar = opts.lMap.toLowerCase();
          out += mapCharWithCase(ch, mappedChar, preserve);
          continue;
        }

        // otherwise copy
        out += ch;
      }

      return out;
    }

    const input = document.getElementById('inputText');
    const output = document.getElementById('outputText');
    const kMap = document.getElementById('kMap');
    const lMap = document.getElementById('lMap');
    const ngToggle = document.getElementById('ngToggle');
    const preserveCase = document.getElementById('preserveCase');

    function runTransform(){
      const opts = {
        kMap: kMap ? (kMap.value || 'p') : 'p',
        lMap: lMap ? (lMap.value || 'n') : 'n',
        ngEnabled: ngToggle.checked,
        preserveCase: preserveCase.checked
      };
      const result = transformText(input.value, opts);
      output.textContent = result;
    }

    document.getElementById('transformBtn').addEventListener('click', runTransform);
    input.addEventListener('input', runTransform);
    ngToggle.addEventListener('change', runTransform);
    preserveCase.addEventListener('change', runTransform);

    document.getElementById('copyBtn').addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(output.textContent);
        alert('Tersalin!');
      }catch(e){
        alert('Gagal menyalin â€” browser tidak mendukung API clipboard.');
      }
    });

    document.getElementById('downloadBtn').addEventListener('click', ()=>{
      const blob = new Blob([output.textContent], {type:'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'hasil-transform.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // initial run
    runTransform();
  </script>
</body>
</html>
